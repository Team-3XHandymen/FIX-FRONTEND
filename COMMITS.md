Created on 14/08/25 to keep track of different commits

Use this template
____________________________________________________________________________________________________
Collaborator name:
Date: 
Commit msg: 
Changes made: 
    *
    *
    *
Notes:
____________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 14/8/25
Commit msg: COMMIT.md created
Changes made: 
    *COMMIT.md created
    *
    *
Notes:
____________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 15/8/25
Commit msg:Client sign up Integration with database 1
Changes made: 
    *Changed the sign up interface of clerk to enter a username and address the user by the new username.
    *Integrated clerk sign up to trigger creating a new user in the database collection-clients with minimal data; username,email,clerkuserid, created time.
    *Here is the flow: 
    User Signs Up (Index.tsx)
├── Attempts to create client record once
├── If new user → Client created successfully
├── If existing user → Silently handles 409 conflict
└── User marked as processed (no infinite loops)

User Navigates to Dashboard (ClientDashboard.tsx)
├── Fetches client data from database
├── Displays clean, professional interface
└── No debug information cluttering the UI
Notes:getting errors for inline codes.
____________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 15/8/25
Commit msg: "Complete Your Profile setup"
Changes made: 
    *Added a complete your profile segment
    *Added logic to show the profile completion progress
    *Profile page was modified to show available info and enabled editing customer data.
Notes: Need to integrate google maps to add the address precisely.
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 17/8/25
Commit msg: "Booking placement integrated for clients"
Changes made: 
    *Added Hire now buttons to service provider cards
    *Created an advanced form to place bookings and integrated the database to save the booking with providerID, clientID, and other filled information with status set as pending
    *Generating a booking ID at the end of every booking placement
Notes: Inline code errors.
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 18/8/25
Commit msg: "Upcoming bookings integrated with the db:clients"
Changes made: 
    *Integrated Your bookings component with the database collection bookings.(Shows all bookings under clientid except for completed ones)
    *Instead of using two booking ids , removed the auto generating bookingid and kept only the database bookingid
    *Changed the collection bookings to save the serviceprovider's name and service category name too to render details easier.
Notes: 
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 19/8/25
Commit msg: "Handyman registration integration with the database"
Changes made: 
    *Modified the handyman registration form for user convinience
    *Integrated the database to store the registration details and create a serviceprovider array.
    *Added the service dashboard button to the homepage for easy access, it checks the clerk unsafemetadata to identify the user as a handyman and make this button visible only to the serviceproviders.
    *Deleted few service arrays that didnt make sense.
Notes: Can start with handyman part of booking process.
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 20/8/25
Commit msg: "Loading bookings in the service dashboard"
Changes made: 
    *Added personalized welcome message to the service dashboard
    *Added Logics to grab the serviceprovider userid and filter the bookings under that id to be visible on the service dashboard under client requests. 
    *Shows the service category, client name, description , date time scheduled and requested, and location
Notes: Adding the logic to change the booking status on serviceprovider's decision to accept or reject.
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 21/8/25
Commit msg: "Added booking acceptance,rejection logics"
Changes made: 
    *amended post request of handyman registration, when saving a new handyman instead of using an autogenerated id I have integrated to store the clerkid.
    *removed generating random ids for handymen now every where the clerk id is being used as the identification of the handyman.
    *Added logic to change booking status based on handyman's input for client request,when accepting, it asks the fee before submission.
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 22/8/25
Commit msg: "Added autofil for the registration form"
Changes made: 
    *Instead of asking the user to provide the same information several times, we now use the existing client information of the same profile when a client registers as a service provider. keeping the access to edit if the client wants to do so.
    *Service provider dashboard now opens in a seperate tab for ease of access and separation of two profiles.
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 23/8/25
Commit msg: "Enhanced booking system with new status flow and updated handyman registration redirect"
Changes made: 
    *Updated booking status system to include new flow: pending → accepted/rejected → paid → done → completed
    *Modified handyman registration to redirect to homepage instead of dashboard after successful registration
    *Added new API endpoints for client and provider status updates
    *Updated frontend components to handle new status transitions with appropriate action buttons
    *Enhanced status display and user experience across all booking-related components
    *Added new "Other Bookings" section below "Your Bookings" to display non-pending bookings
    *Updated booking categorization to include accepted, paid, done, completed, and rejected statuses
    *Added section headers for better organization: Pending Bookings, Other Bookings, Cancelled Bookings
    *Enhanced status display with appropriate colors and badges for each booking status
    *Improved user experience by showing all booking states in organized sections
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 24/8/25
Commit msg: "Enhancements on the booking process"
Changes made: 
    •	Added "Other Bookings" section below "Your Bookings"
    •	Updated booking statuses: pending, accepted, paid, done, completed, rejected
    •	Added section headers: Pending, Other, Cancelled
    •	Enhanced status display with colors, badges, and progress bars
    •	Improved dashboards with consistent two-section structure
    •	Handyman: Action Required (pending, paid, done) + Recent Jobs (accepted, rejected)
    •	Client: Action Required (accepted, done) + Recent Jobs (pending, paid, completed, rejected)
    •	Elegant headers with counts and color-coded indicators
    •	Unified card-based design with rounded corners, shadows, hover effects
    •	Improved action buttons with contextual options (Review, Mark Done, Confirm Payment, etc.)
    •	Redesigned popups with modern UI, gradients, spacing, icons
    •	Fixed refresh issues with refresh key + 30-sec polling for auto-update
    •	Removed redundant standalone Recent Jobs in handyman dashboard
    •	Renamed "View Only" → "Recent Jobs" in both dashboards
    •	Updated descriptions to "job(s) for reference"
    •	Added debugging logs for refresh tracking
    •	Enhanced visual hierarchy with dots, grids, and status explanations
    •	Clearer progress tracking with next steps for each booking status
    •	Removed reference count badges from Recent Jobs

________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 25/8/25
Commit msg: "Implemented WebSocket real-time communication and chat system"
Changes made: 
    •	Replaced 30-second polling with WebSocket connections for real-time updates
    •	Added Socket.io backend server with booking room management
    •	Created Chat model and API endpoints for message persistence
    •	Implemented real-time chat interface for client-handyman communication
    •	Added ChatInterface component with WebSocket fallback to API
    •	Updated dashboard components to use WebSocket instead of polling
    •	Created HandymanServiceHistory page for completed bookings
    •	Updated dashboard categorization to exclude completed bookings from "Recent Jobs"
    •	Added Service History menu option to handyman dashboard layout
    •	Integrated WebSocket service with automatic reconnection handling
    •	Added real-time status update broadcasting across connected clients
    •	Implemented smart refresh only when dashboard is visible
    •	Enhanced user experience with immediate updates and reduced server load
    •	Added chat functionality to booking detail popups
    •	Updated routing to include new service history pages
Notes: WebSocket implementation provides real-time updates without polling, improving performance and user experience
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 26/8/25
Commit msg: "Created protected routes"
Changes made: 
    •	Created protected routes for handyman and client.
    •	Fixed errors on the terminal aboout a duplicate variable declaration
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 30/9/25
Commit msg: "Stripe integration foundation"
Changes made: 
    •	Created a stripe account with connect access, got the sk and pk
    •	Installed stripe to the backend.
    •   Configured Database models, controllers, api routes on the backend.
    •   Configured payment components, payment pages on the frontend.
Notes: But since the webhooks need a publicaly accessible URL. terminating the process of payment integration until the deployment.
Next step: Deployment of the frontend and backend.
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 01/10/25
Commit msg: "Integrated Google Maps Autocomplete for location selection"
Changes made: 
    •	Added VITE_GOOGLE_MAPS_API_KEY to environment variables (vite-env.d.ts)
    •	Created LocationAutocomplete component (src/components/ui/location-autocomplete.tsx)
    •   Integrated Google Maps Autocomplete in Handyman Registration form (Step 4 - Location field)
    •   Added state management for location string and coordinates (lat/lng)
    •   Updated handyman registration to send coordinates along with location to backend
    •   Created comprehensive setup guide (GOOGLE_MAPS_SETUP_GUIDE.md)
    •   Location autocomplete provides city suggestions similar to Uber/Pickme
Notes: Users can now search and select their city location with autocomplete. Coordinates are captured and sent to backend for distance calculations.
Next step: Integrate Google Maps Autocomplete in Client Profile page and implement distance-based handyman filtering.
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 20/10/25
Commit msg: "Client location integration and progress synchronization"
Changes made: 
    • Fixed the location integration in the service provider registration form. now it lets the customer enter a close location and show suggestions then once the suggestion is selected it allows the user to adjust the location by moving the pin.
    • The same was added to the client profile to grab the precise location.
    •  Imported and used the same LocationSelector from handyman registration in Client Profile (kept selector logic unchanged)
    •  Progress logic unified to use `location` (string) + saved coordinates; dashboard now reflects this field
    •  Progress advances only after map-based confirmation (typing/suggestions do not commit)
    •  Added clear-location UX: empty input marks Address as Missing immediately; on Save, profile sends empty location
    •  Controlled input wiring around selector (no direct DOM writes); minor UI state cleanups and lints
    •  Documentation updated in both frontend and backend to reflect the day’s changes with a single shared commit name
    • Added recent jobs column to the service provider dashboard.
Notes: Client Profile and Dashboard are now fully in sync for location—selection, persistence, clearing, and progress all behave consistently.
Next steps: - 

Collaborator name:Sewwandi
Date: 20/10/25
Commit msg: "Recent messages"
Changes made: • Fixed recent msgs on the client and handyman dashboards

________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 21/10/25
Commit msg: "Attempted to improve the recent msgs component in the dashboard"
Changes made: 
    •  -
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 22/10/25
Commit msg: "Deployed the frontend"
Changes made: 
    •  Prepared the frontend for the deployment 
    •  Deployed on Netlify
    •  Attempted to deploy the backend as well but failed
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 23/10/25
Commit msg: "Backend Deployment"
Changes made: 
    •  Was able to deploy the Backend on render after solving a node definition not found error.
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 24/10/25
Commit msg: "Cors error and BaseUrl fix"
Changes made: 
    •  Fixed an error on UseMybookings hook in the frontend
    •  Fixed CreateBooking component.
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 25/10/25
Commit msg: "Duplicate msg issue fixed"
Changes made: 
    •  Msgs appeared twice in the chat, because msg was added to local state immediately for instand feedback and the same msg was recieved again via websocket broadcast. As a solution, modified ChatInterface.tsx to skip websocket msgs from the current user. 

Commit msg: "Location selector component added to the create booking page"
Changes made: 
    •  We had just a text box to fill the service location, instead of that the google maps location selector was integrated on the create booking page. 
    •  Also added a button for client's to select their already registered address as the service location. It fetches the client's saved location from their profile.

Commit msg: "Client/Handyman Dashboard Restructured and self booking prevention implemented"
Changes made: 
    •  Changed the layout of the Client Dashboard to have 3 categories of bookings : Action required, Ongoing, Recent. 
    •  Action required : Shows urgent bookings that require payment confirmation or completion confirmation
    •  Ongoing Bookings : Shows all non completed bookings.
    •  Recent Bookings : Shows all recently completed bookings
    •  Changed the layout of the Handyman Dashboard to have 3 categories of bookings : Action required, Ongoing, Recent. 
    •  Action required : Shows urgent bookings that require acceptance and work done confirmation
    •  Ongoing Bookings : Shows all non completed bookings.
    •  Recent Bookings : Shows all recently completed bookings.
    •  Added user authentication to the select proffessionals page by using the useUser from clerk to access the current user's ID. Then added filtering logic in the fetchprofessionals function to exclude the current user's own handyman profile.

Commit msg: "Stripe Integration"
Changes made: 
    •  I had already added the configuration codes but until the deployment was successful, I wasnt able to complete the stripe functions.
    •  The stripe connect is used for the project because end to end payments has to be enabled between the client and the handyman. 
    •  Settings were configured by adding redirect endpoints for connect settings and adding logo to the payment page , configured webhooks by adding endpoints and events.
    •  A payment page is added to direct the clients for payments.
    •  Fixed a API import error and a payment page import error.
    •  Fix: The backend was receiving requests without the required authentication headers, solution: Added clerk authentication hooks and updated fetching functions also added user and gettoken to the dependency array to ensure the component waits for authentication
    •  Fix: StripePaymentButton was using the generic StripeAPI.createCheckoutSession method which doesn't include the required authentication headers agai. solution like before added clerk authentication hooks, updated handlepayment function enhanced error handling.
    •  Error: Provider Stripe account not found. To make the payment the handyman should first have a stripe account.
    Fix: Added payment setup Tab to Handyman Dashboard and integrated the ProviderPaymentSetup component
    Fixed authentication in ProviderPayment Setup. Updated to use clerk authentication, replaced generic API calls with direct fetch() calls
    •  Error: ProviderPaymentSetup component crashed (The getRequirementsText() function was trying to access accountStatus.requirements.length but accountStatus.requirements was undefined, causing the crash.)
    Fix: added comprehensive null safety checks throughout the component,Fixed getStatusBadge() function
    Fixed JSX expressions:
    accountStatus.chargesEnabled → accountStatus?.chargesEnabled
    accountStatus.payoutsEnabled → accountStatus?.payoutsEnabled
    accountStatus.needsOnboarding → accountStatus?.needsOnboarding
    • PaymentSuccess Authentication was improved with proper authentication headers 
    •  Backend Stripe Controller Errors
    Issue: TypeError: Cannot read properties of undefined (reading 'createOnboardingLink')
    Solution: Fixed static method calls from this.createOnboardingLink() to StripeController.createOnboardingLink()
    • Provider Payment Setup Null Reference
    Issue: TypeError: Cannot read properties of undefined (reading 'length')
    Solution: Added comprehensive null safety checks (?. operator) for accountStatus.requirements
    • Content Security Policy (CSP) Violation
    Issue: Browser refused to connect to Stripe source maps
    Solution: Created _headers file with CSP directives for Stripe domains
    • Manual Payment Record Creation
    Issue: Webhooks not firing, no payment records created, booking status not updating
    Solution: Created manual payment creation endpoint and browser console method for testing
    • Stripe Account Setup
    Issue: Handyman account showing as "disabled" despite completing requirements
    Solution: Added debug logging and refresh functionality to ProviderPaymentSetup.tsx
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 26/10/25
Commit msg: "Improvements on the payment logic and chat interface"
Changes made: 
    •  Remove the view booking details button from the payment success page.
    •  Implementing payment tracking for handymen, Api method added to the api.ts code 
    •  Added payment earnings display to the component. Added state and fetch logic : ProviderPaymentsetup.tsx.
    •  Added earnings summary display on the handyman dashboard
    •  On the handyman dashboard (Payments tab), you’ll see:
            Pending payment amount (large font)
            Total earnings across all transactions
            Transaction count
            Payment account status
    •  Replacing dummy values with real database values in the handyman dashboard metrics boxes.
    •  Removed the payment display from ProviderPaymentSetup since those stats are in the upper cards
    •  Now, since there is a platform fee of 20% that should be added to the agreed fee then that should be the payment amount. then that amount minus platform should be added to the total earnings of the handyman . Implemented this logic: Updated ClientPayment to calculate and display the total with the platform fee. Removed old info msgs since it didnt include the platform fee. 
    •  Booking cards are updated to show the Created date and time. and to show the last actioned date and time. 
    Client Dashboard (ClientDashboard.tsx):
    Added date info to 4 cards (action required, ongoing, two in recent)
    Date format: "Created: 12/25/2024 3:45:30 PM"
    Sorts by category:
    Action Required: by last action date (most recent first)
    Ongoing: by scheduled date (soonest first)
    Recent: by completion date (most recent first)
    Handyman Dashboard (ClientRequests.tsx):
    Added date info to 4 cards (action required, ongoing, middle ongoing, recent)
    Same formatting as client dashboard
    Same sorting logic
    •  Removed "Book Another Service" button comes at the end of placing the booking.
    •  ChatInterface (FIX-FRONTEND/src/components/ui/chat/ChatInterface.tsx) — Major update
    Added userType prop
    Shows booking details: other party name, role, service name, booking status
    Mark as read: markMessagesAsRead() on open
    Image upload: file selector with preview
    Displays uploaded images in messages
    Added booking details loading
    2. Chat API (FIX-FRONTEND/src/lib/api.ts)
    Added markMessagesAsRead(bookingId, userId, userType)
    3. Chat Room Pages
    FIX-FRONTEND/src/pages/client/ClientChatRoom.tsx — pass userType="client"
    FIX-FRONTEND/src/pages/handyman/HandymanChatRoom.tsx — pass userType="provider"
    •  Changed the "Chat" button to navigate to /handyman/chat/${request._id}.
    Removed the ChatInterface component from the dialog.
    Removed the unused ChatInterface import.
Next steps: More Improvements needed for chat interface integrations
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 27/10/25
Commit msg: "Error fix on the handyman registration form"
Changes made: 
    *Issue: The profile image preview was not working. Image uploads: missing blob: in img-src
    Fix: updated CSP to allow blob: for image uploads/previews on the headers 
    *Issue: Map was not loaging. Google Maps: missing https://maps.googleapis.com in script-src
    Fix: Updated CSP to allow https://maps.googleapis.com for Google Maps
    *Updated FIX-FRONTEND/public/_headers and rebuilt
    *Updated FIX-FRONTEND/public/_headers to allow:
    Google Maps scripts: https://*.googleapis.com added to script-src
    Google Maps API connections: https://maps.googleapis.com, https://*.googleapis.com, and https://places.googleapis.com added to connect-src
    Google Maps tiles and images: https://*.googleapis.com, https://*.gstatic.com, and https://*.google.com added to img-src
    Image uploads: blob: added to img-src for previews

Commit msg: "Improvements on the chat interface"
Changes made: 
    *Improvements: 
    Modified BookingPopup to remove chat toggle and redirect Chat button to dedicated page
    Enhanced ChatInterface to show detailed booking information for handyman view
________________________________________________________________________________________________
Collaborator name:Sewwandi
Date: 28/10/25
Commit msg: "Improved chat button usage on booking cards in handyman dashboard"
Changes made: 
    * In the booking card, removed the top bar navigation.
    * Removed the extra chat button.

Commit msg: "Implementing the review system"
Changes made: 
    * We already had some parts of the review system implemented on the codebase. So basically, we had to do some improvements.
    * Review API (FIX-FRONTEND/src/lib/api.ts)
    ReviewAPI class with createReview, getProviderReviews, and getBookingReview
    * RatingDialog component (FIX-FRONTEND/src/components/client/RatingDialog.tsx)
        Black header with close button
        Provider info with avatar placeholder
        Star rating (1–5, required)
        Issue selection for lower ratings (Cleanliness, Navigation, Price, etc.)
        Optional brief description input
        Optional detailed feedback textarea
        Submit that combines rating + completion
    * Integrated with BookingPopup (FIX-FRONTEND/src/components/client/BookingPopup.tsx)
        Clicking "Confirm Job Completion" opens the rating dialog
        After review submission, marks the booking as completed
        Review data is saved before changing status
    * The pop up review window style was different from other components. Therefore fixed it. 
    * Problem: API returned 401 due to missing X-User-ID and X-User-Type.
      Fix: In RatingDialog, added direct axios call with the required headers.
    